# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–¥–∏–∞–≥—Ä–∞–º–º–∞-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
- [–°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Å–ª–æ–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [CI/CD Pipeline](#cicd-pipeline)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
- [–°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ](#—Å–µ—Ç–µ–≤–æ–µ-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
- [–ü–æ—Ä—Ç—ã](#–ø–æ—Ä—Ç—ã)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –¥–≤—É–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏: Flask backend –∏ Node.js frontend, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ Docker network.

## –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```mermaid
flowchart TB
    subgraph Client["üåê –ö–ª–∏–µ–Ω—Ç"]
        Browser["–ë—Ä–∞—É–∑–µ—Ä"]
    end

    subgraph Server["üñ•Ô∏è –°–µ—Ä–≤–µ—Ä (194.58.126.39)"]
        subgraph DockerNetwork["Docker Network: flask-app-net"]
            subgraph Frontend["Frontend Container :4173"]
                Express["Express Server"]
                Proxy["HTTP Proxy Middleware"]
                Static["Static Files<br/>(HTML, CSS, JS)"]
            end
            
            subgraph Backend["Backend Container :5001"]
                Flask["Flask App"]
                API["REST API"]
            end
        end
    end

    Browser -->|"HTTP :4173"| Express
    Express --> Static
    Express -->|"/api/*"| Proxy
    Proxy -->|"HTTP :5001"| Flask
    Flask --> API
```

## –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```mermaid
flowchart LR
    subgraph Presentation["Presentation Layer"]
        UI["Web UI<br/>(HTML/CSS/JS)"]
        Express["Express Server"]
    end

    subgraph Application["Application Layer"]
        Routes["Flask Routes"]
        Handlers["Request Handlers"]
    end

    subgraph Domain["Domain Layer"]
        Math["Math Operations"]
        Health["Health Check"]
        Info["System Info"]
    end

    UI --> Express
    Express -->|"Proxy /api"| Routes
    Routes --> Handlers
    Handlers --> Math
    Handlers --> Health
    Handlers --> Info
```

## CI/CD Pipeline

```mermaid
flowchart LR
    subgraph Developer["üë®‚Äçüíª Developer"]
        Code["Code Changes"]
    end

    subgraph GitHub["GitHub"]
        Push["git push main"]
        Actions["GitHub Actions"]
        GHCR["GitHub Container<br/>Registry"]
    end

    subgraph Jobs["Workflow Jobs"]
        BuildBackend["Build Backend"]
        BuildFrontend["Build Frontend"]
        Deploy["Deploy via SSH"]
    end

    subgraph Server["üñ•Ô∏è Production Server"]
        Docker["Docker"]
        Containers["Running<br/>Containers"]
    end

    Code --> Push
    Push --> Actions
    Actions --> BuildBackend
    Actions --> BuildFrontend
    BuildBackend --> GHCR
    BuildFrontend --> GHCR
    BuildBackend --> Deploy
    BuildFrontend --> Deploy
    Deploy -->|"SSH"| Docker
    Docker --> Containers
    GHCR -->|"docker pull"| Docker
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```mermaid
flowchart TB
    subgraph BackendImage["ghcr.io/avkorolyov/actions:latest"]
        Python["Python 3.12-slim"]
        FlaskLib["Flask 3.0 + flask-cors"]
        AppPy["app.py"]
        Healthcheck["HEALTHCHECK"]
    end

    subgraph FrontendImage["ghcr.io/avkorolyov/actions-frontend:latest"]
        Node["Node 18-alpine"]
        ExpressLib["Express + http-proxy-middleware"]
        ServerJs["server.js"]
        Public["public/<br/>(index.html, app.js, styles.css)"]
    end

    BackendImage -->|"PORT 5001"| BackendContainer["flask-backend"]
    FrontendImage -->|"PORT 4173"| FrontendContainer["flask-frontend"]
    
    BackendContainer <-->|"flask-app-net"| FrontendContainer
```

## –°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

```mermaid
sequenceDiagram
    participant B as Browser
    participant F as Frontend :4173
    participant BE as Backend :5001

    B->>F: GET /
    F->>B: index.html + assets

    B->>F: GET /api/health
    F->>BE: GET /health (proxy)
    BE->>F: {"status": "ok"}
    F->>B: {"status": "ok"}

    B->>F: GET /api/multiply/3/4
    F->>BE: GET /multiply/3/4 (proxy)
    BE->>F: {"result": 12}
    F->>B: {"result": 12}
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### Backend (Flask)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `app.py` | –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| Flask 3.0 | Web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| flask-cors | CORS middleware |
| REST API | 6 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ |

### Frontend (Node.js)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `server.js` | Express —Å–µ—Ä–≤–µ—Ä —Å proxy |
| `index.html` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ UI |
| `app.js` | –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ |
| `styles.css` | –°—Ç–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ |

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| Docker | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è |
| Docker Network | –°–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ |
| GitHub Actions | CI/CD pipeline |
| GHCR | –•—Ä–∞–Ω–µ–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–æ–≤ |
| SSH | –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä |

## –ü–æ—Ä—Ç—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| Backend | 5001 | Flask REST API |
| Frontend | 4173 | Express + Static files |

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|----------|
| `PORT` | 5001 | –ü–æ—Ä—Ç Flask |

### Frontend

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|----------|
| `PORT` | 4173 | –ü–æ—Ä—Ç Express |
| `BACKEND_URL` | http://flask-backend:5001 | URL backend –≤ Docker network |

